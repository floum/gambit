import{key2pos as o,pos2key as t,allPos as n}from"./util.js";import"./types.js";const diff=(o,t)=>Math.abs(o-t);const pawn=o=>(t,n,r,s)=>diff(t,r)<2&&(o==="white"?s===n+1||n<=1&&s===n+2&&t===r:s===n-1||n>=6&&s===n-2&&t===r);const knight=(o,t,n,r)=>{const s=diff(o,n);const e=diff(t,r);return s===1&&e===2||s===2&&e===1};const bishop=(o,t,n,r)=>diff(o,n)===diff(t,r);const rook=(o,t,n,r)=>o===n||t===r;const queen=(o,t,n,r)=>bishop(o,t,n,r)||rook(o,t,n,r);const king=(o,t,n)=>(r,s,e,c)=>diff(r,e)<2&&diff(s,c)<2||n&&s===c&&s===(o==="white"?0:7)&&(r===4&&(e===2&&t.includes(0)||e===6&&t.includes(7))||t.includes(e));function rookFilesOf(t,n){const r=n==="white"?"1":"8";const s=[];for(const[e,c]of t)e[1]===r&&c.color===n&&c.role==="rook"&&s.push(o(e)[0]);return s}function premove(r,s,e){const c=r.get(s);if(!c)return[];const i=o(s),l=c.role,u=l==="pawn"?pawn(c.color):l==="knight"?knight:l==="bishop"?bishop:l==="rook"?rook:l==="queen"?queen:king(c.color,rookFilesOf(r,c.color),e);return n.filter((o=>(i[0]!==o[0]||i[1]!==o[1])&&u(i[0],i[1],o[0],o[1]))).map(t)}export{knight,premove,queen};
//# sourceMappingURL=premove.js.map
