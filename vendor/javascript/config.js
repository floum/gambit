import{setCheck as e,setSelected as o}from"./board.js";import{read as t}from"./fen.js";import"./util.js";import"./types.js";import"./premove.js";function applyAnimation(e,o){if(o.animation){deepMerge(e.animation,o.animation);(e.animation.duration||0)<70&&(e.animation.enabled=false)}}function configure(a,i){var n,l,s;((n=i.movable)===null||n===void 0?void 0:n.dests)&&(a.movable.dests=void 0);((l=i.drawable)===null||l===void 0?void 0:l.autoShapes)&&(a.drawable.autoShapes=[]);deepMerge(a,i);if(i.fen){a.pieces=t(i.fen);a.drawable.shapes=((s=i.drawable)===null||s===void 0?void 0:s.shapes)||[]}"check"in i&&e(a,i.check||false);"lastMove"in i&&!i.lastMove?a.lastMove=void 0:i.lastMove&&(a.lastMove=i.lastMove);a.selected&&o(a,a.selected);applyAnimation(a,i);if(!a.movable.rookCastle&&a.movable.dests){const e=a.movable.color==="white"?"1":"8",o="e"+e,t=a.movable.dests.get(o),i=a.pieces.get(o);if(!t||!i||i.role!=="king")return;a.movable.dests.set(o,t.filter((o=>!(o==="a"+e&&t.includes("c"+e))&&!(o==="h"+e&&t.includes("g"+e)))))}}function deepMerge(e,o){for(const t in o)Object.prototype.hasOwnProperty.call(o,t)&&(Object.prototype.hasOwnProperty.call(e,t)&&isPlainObject(e[t])&&isPlainObject(o[t])?deepMerge(e[t],o[t]):e[t]=o[t])}function isPlainObject(e){if(typeof e!=="object"||e===null)return false;const o=Object.getPrototypeOf(e);return o===Object.prototype||o===null}export{applyAnimation,configure};
//# sourceMappingURL=config.js.map
